{% extends 'base.html' %}

{% block content %}
  <h2>Convert File</h2>

  {% if file.local_file_type == 'csv' %}

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <!-- {{ form.as_p }} -->
    

        <!-- <div id="image_upload" style="display:none">
          <label for="conversion">Choose Operation:</label>
          <select name="conversion_type" id="conversion_type" onchange="csvtypeOption(this.value)">
            <option value="TimeSeries">Time Series</option>
            <option value="ToSQL">To SQL</option>
            <option value="LinearReg">Linear Regression</option>
          </select>
          </div> -->

        <!-- <div id="csv_div" style="display:none"> -->


        <div id="csv_options" >
        <label for="conversion">Choose Operation:</label>
        <select name="convert_type" id="conversion_type" onchange="csvtypeOption(this.value)">
          <!-- <option value="TimeSeries">Time Series</option> -->
          <option value="ToSQL">To SQL</option>
          <option value="ToNOSQL">To NOSQL</option>

          <!-- <option value="LinearReg">Linear Regression</option> -->
        </select>
        </div>

        <div id="sql" style="display:none">
          <label for="collection">Collection Name:</label>
          <input type="text" name="collection_name_sql" placeholder="Enter sql Collection name">
        </div>

        <div id="nosql" style="display:none">
          <label for="collection">Collection Name:</label>
          <input type="text" name="collection_name_nosql" placeholder="Enter nosql Collection name">
        </div>

       
        

       

        
    <!-- </div> -->
        

        <br><br>
        <!-- <input type="file" name="file"> -->
        <button type="submit">Submit</button>
      </div>
    <!-- <div id="url-upload" style="display:none">
        <label for="id_url_file_type">File type:</label>
        <select name="url_file_type" id="id_url_file_type">
            <option value="null">----</option>
            <option value="sql">SQL</option>
            <option value="nosql">NOSQL</option>
        </select>
        <br><br>
        <input type="text" name="file_url" placeholder="Enter file URL">
        <input type="text" name="username" placeholder="Enter Username">
        <input type="text" name="password" placeholder="Enter Password">
    </div> -->
    <br><br>
  </form>

  {% else %}
        <!-- <p>abcd</p> -->
        <img src="{{ MEDIA_URL }}{{ file.file.url }}" alt="{{ file.name }}">
  {% endif %}
  
  <script>
    // document.getElementById("local-upload").style.display = "block";
    // document.getElementById("csv_options").style.display = "block";
    document.getElementById("sql").style.display = "block";
    // document.getElementById("moving_avg").style.display = "block";
    // document.getElementById("TS_div").style.display = "block";
    // document.getElementById("csv_div").style.display = "block";

    

      // function handleUploadOption(value) {
      //     if (value == "local") {
      //         document.getElementById("local-upload").style.display = "block";
      //         document.getElementById("url-upload").style.display = "none";
      //     } else {
      //         document.getElementById("local-upload").style.display = "none";
      //         document.getElementById("url-upload").style.display = "block";
      //     }
      // }

      // function FiletypeOption(value) {
      //     if (value == "csv") {
      //         document.getElementById("csv_div").style.display = "block";
      //         document.getElementById("csv_options").style.display = "block";

              
      //     } else {
      //       document.getElementById("csv_div").style.display = "none";

      //       document.getElementById("csv_options").style.display = "none";
      //     }
      // }

      function csvtypeOption(value) {
          if (value == "TOSQL") {
              // document.getElementById("time_series").style.display = "block";
              // document.getElementById("TS_div").style.display = "block";

              document.getElementById("sql").style.display = "block";
              document.getElementById("nosql").style.display = "none";

              // document.getElementById("linear_reg").style.display = "none";
              
          } 
          else{
              

              document.getElementById("sql").style.display = "none";
              document.getElementById("nosql").style.display = "block";

              // document.getElementById("linear_reg").style.display = "block";
          }
      }

      
  </script>
  
  
  
{% endblock %}